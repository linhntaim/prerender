{"version":3,"file":"prerender-io-server.js","names":["PrerenderIoServer","server","prerender","loadConfigurations","loadPlugins","forEach","plugin","use","start","env","getEnv","config","port","chromeLocation","chromeFlags","logRequests","pageDoneCheckInterval","pageLoadTimeout","waitAfterLastRequest","followRedirects","key","hasOwnProperty","RenderServer"],"sources":["../../src/classes/prerender-io-server.js"],"sourcesContent":["import {getEnv} from 'dotenv-packed'\r\nimport prerender from 'prerender'\r\nimport RenderServer from './render-server'\r\n\r\nexport default class PrerenderIoServer extends RenderServer\r\n{\r\n    constructor() {\r\n        super()\r\n    }\r\n\r\n    start() {\r\n        this.server = prerender(this.loadConfigurations())\r\n        this.loadPlugins().forEach(plugin => {\r\n            this.server.use(prerender[plugin]())\r\n        })\r\n        this.server.start()\r\n        return true\r\n    }\r\n\r\n    loadConfigurations() {\r\n        const env = getEnv()\r\n        const config = {\r\n            port: 'PORT',\r\n\r\n            chromeLocation: 'CHROME_LOCATION',\r\n            chromeFlags: 'CHROME_FLAGS',\r\n\r\n            logRequests: 'LOG_REQUESTS',\r\n            pageDoneCheckInterval: 'PAGE_DONE_CHECK_INTERVAL',\r\n            pageLoadTimeout: 'PAGE_LOAD_TIMEOUT',\r\n            waitAfterLastRequest: 'WAIT_AFTER_LAST_REQUEST',\r\n            followRedirects: 'FOLLOW_REDIRECTS',\r\n        }\r\n        for (const key in config) {\r\n            if (env.hasOwnProperty(config[key])) {\r\n                config[key] = env[config[key]]\r\n            }\r\n            else {\r\n                delete config[key]\r\n            }\r\n        }\r\n        return config\r\n    }\r\n\r\n    loadPlugins() {\r\n        const env = getEnv()\r\n        return env.hasOwnProperty('USE_PLUGINS') ? env['USE_PLUGINS'] : []\r\n    }\r\n}\r\n"],"mappings":"oYAAA,2CACA,4DACA,qE,smFAEqBA,kB,4HAEjB,4BAAc,iEAEb,C,mDAED,gBAAQ,gBACJ,KAAKC,MAAL,CAAc,GAAAC,qBAAA,EAAU,KAAKC,kBAAL,EAAV,CAAd,CACA,KAAKC,WAAL,GAAmBC,OAAnB,CAA2B,SAAAC,MAAM,CAAI,CACjC,KAAI,CAACL,MAAL,CAAYM,GAAZ,CAAgBL,qBAAA,CAAUI,MAAV,GAAhB,CACH,CAFD,EAGA,KAAKL,MAAL,CAAYO,KAAZ,GACA,MAAO,KACV,C,kCAED,6BAAqB,CACjB,GAAMC,IAAG,CAAG,GAAAC,oBAAA,GAAZ,CACA,GAAMC,OAAM,CAAG,CACXC,IAAI,CAAE,MADK,CAGXC,cAAc,CAAE,iBAHL,CAIXC,WAAW,CAAE,cAJF,CAMXC,WAAW,CAAE,cANF,CAOXC,qBAAqB,CAAE,0BAPZ,CAQXC,eAAe,CAAE,mBARN,CASXC,oBAAoB,CAAE,yBATX,CAUXC,eAAe,CAAE,kBAVN,CAAf,CAYA,IAAK,GAAMC,IAAX,GAAkBT,OAAlB,CAA0B,CACtB,GAAIF,GAAG,CAACY,cAAJ,CAAmBV,MAAM,CAACS,GAAD,CAAzB,CAAJ,CAAqC,CACjCT,MAAM,CAACS,GAAD,CAAN,CAAcX,GAAG,CAACE,MAAM,CAACS,GAAD,CAAP,CACpB,CAFD,IAGK,CACD,MAAOT,OAAM,CAACS,GAAD,CAChB,CACJ,CACD,MAAOT,OACV,C,2BAED,sBAAc,CACV,GAAMF,IAAG,CAAG,GAAAC,oBAAA,GAAZ,CACA,MAAOD,IAAG,CAACY,cAAJ,CAAmB,aAAnB,EAAoCZ,GAAG,CAAC,aAAD,CAAvC,CAAyD,EACnE,C,8BA3C0Ca,wB"}